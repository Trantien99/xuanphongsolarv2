export const translations = {
  vi: {
    // Common
    loading: "Đang tải...",
    error: "Lỗi",
    success: "Thành công",
    cancel: "Hủy",
    save: "Lưu",
    edit: "Chỉnh sửa",
    delete: "Xóa",
    search: "Tìm kiếm",
    filter: "Lọc",
    sort: "Sắp xếp",
    viewAll: "Xem tất cả",
    backToProducts: "Quay lại sản phẩm",
    
    // Navigation
    navigation: {
      home: "Trang chủ",
      products: "Sản phẩm",
      news: "Tin tức",
      about: "Giới thiệu",
      contact: "Liên hệ",
      cart: "Giỏ hàng",
      account: "Tài khoản",
    },
    
    // Product Detail
    productDetail: "Chi tiết sản phẩm",
    productNotFound: "Không tìm thấy sản phẩm",
    productImages: "Hình ảnh sản phẩm",
    noImages: "Chưa có hình ảnh",
    specifications: "Thông số kỹ thuật",
    features: "Tính năng",
    reviews: "Đánh giá",
    relatedProducts: "Sản phẩm liên quan",
    addToCart: "Thêm vào giỏ",
    buyNow: "Mua ngay",
    inStock: "Còn hàng",
    outOfStock: "Hết hàng",
    stockAvailable: "có sẵn",
    quantity: "Số lượng",
    price: "Giá",
    originalPrice: "Giá gốc",
    discount: "Giảm giá",
    brand: "Thương hiệu",
    category: "Danh mục",
    sku: "Mã sản phẩm",
    rating: "Đánh giá",
    reviewCount: "đánh giá",
    writeReview: "Viết đánh giá",
    featured: "Nổi bật",
    share: "Chia sẻ",
    favorite: "Yêu thích",
    
    // Image Gallery
    imageCounter: "{current} / {total}",
    previousImage: "Hình trước",
    nextImage: "Hình tiếp theo",
    thumbnail: "Thu nhỏ",
    
    // Consultation
    consultationTitle: "Đăng ký tư vấn miễn phí",
    consultationSubtitle: "Để lại thông tin, chúng tôi sẽ tư vấn cho bạn về giải pháp năng lượng mặt trời phù hợp nhất",
    consultationButton: "Tư vấn miễn phí",
    consultationCategory: "Danh mục cần tư vấn",
    consultationName: "Họ và tên",
    consultationPhone: "Số điện thoại",
    consultationEmail: "Email",
    consultationContent: "Nội dung cần tư vấn",
    consultationPlaceholder: "Mô tả chi tiết về nhu cầu và câu hỏi của bạn...",
    sendRequest: "Gửi yêu cầu",
    sending: "Đang gửi...",
    consultationSuccess: "Yêu cầu tư vấn của bạn đã được gửi. Chúng tôi sẽ liên hệ với bạn trong thời gian sớm nhất.",
    consultationError: "Có lỗi xảy ra. Vui lòng thử lại sau.",
    privacyPolicy: "chính sách bảo mật",
    privacyText: "Bằng cách gửi form, bạn đồng ý với",
    
    // Consultation Categories
    consultationCategories: {
      "solar-panels": "Tấm pin năng lượng mặt trời",
      "inverters": "Bộ nghịch lưu",
      "batteries": "Pin lưu trữ",
      "installation": "Tư vấn lắp đặt",
      "maintenance": "Bảo trì hệ thống",
      "financing": "Tài chính và vay vốn",
      "others": "Khác",
    },
    
    // Form Validation
    validation: {
      required: "Trường này là bắt buộc",
      email: "Email không hợp lệ",
      phone: "Số điện thoại không hợp lệ",
      selectCategory: "Vui lòng chọn danh mục cần tư vấn",
      enterName: "Vui lòng nhập họ tên",
      enterPhone: "Vui lòng nhập số điện thoại",
      enterEmail: "Vui lòng nhập email",
      enterContent: "Vui lòng nhập nội dung cần tư vấn",
    },
    
    // Breadcrumb
    breadcrumb: {
      home: "Trang chủ",
      products: "Sản phẩm",
      news: "Tin tức",
      cart: "Giỏ hàng",
      checkout: "Thanh toán",
    },
    
    // Product States
    productStates: {
      new: "Mới",
      hot: "Hot",
      sale: "Khuyến mãi",
      bestSeller: "Bán chạy",
    },
    
    // Currency
    currency: "₫",
    
    // Time
    timeAgo: {
      justNow: "Vừa xong",
      minutesAgo: "{minutes} phút trước",
      hoursAgo: "{hours} giờ trước",
      daysAgo: "{days} ngày trước",
      monthsAgo: "{months} tháng trước",
      yearsAgo: "{years} năm trước",
    },

    // HTML Meta titles and descriptions
    meta: {
      title: "IndustrialSource - Khám phá sản phẩm trực quan cho các chuyên gia ngành",
      description: "Tìm sản phẩm công nghiệp nhanh hơn với tìm kiếm hình ảnh. Nền tảng thương mại điện tử chuyên nghiệp cho các chuyên gia ngành với công cụ khám phá sản phẩm tiên tiến, công cụ điện, thiết bị an toàn và máy móc.",
      keywords: "sản phẩm công nghiệp, tìm kiếm hình ảnh, thị trường B2B, công cụ chuyên nghiệp, tìm nguồn cung thiết bị, công cụ điện, thiết bị an toàn, máy móc, thiết bị điện tử, vật liệu xây dựng",
      author: "IndustrialSource",
      ogTitle: "IndustrialSource - Khám phá sản phẩm trực quan cho các chuyên gia ngành",
      ogDescription: "Tìm sản phẩm công nghiệp nhanh hơn với tìm kiếm hình ảnh. Nền tảng thương mại điện tử chuyên nghiệp cho các chuyên gia ngành với công cụ khám phá sản phẩm tiên tiến.",
      twitterTitle: "IndustrialSource - Khám phá sản phẩm trực quan cho các chuyên gia ngành",
      twitterDescription: "Tìm sản phẩm công nghiệp nhanh hơn với tìm kiếm hình ảnh. Nền tảng thương mại điện tử chuyên nghiệp cho các chuyên gia ngành với công cụ khám phá sản phẩm tiên tiến.",
    },

    // Home page
    home: {
      heroTitle: "Khám phá sản phẩm công nghiệp với công nghệ tìm kiếm hình ảnh",
      heroSubtitle: "Tìm kiếm sản phẩm dễ dàng hơn bao giờ hết với công nghệ AI tiên tiến",
      items: "sản phẩm",
    },

    // Page titles
    pageTitle: {
      home: "Trang chủ",
      products: "Sản phẩm",
      news: "Tin tức",
      cart: "Giỏ hàng",
      checkout: "Thanh toán",
      productDetail: "Chi tiết sản phẩm",
      notFound: "Không tìm thấy trang",
    },

    // Common UI elements
    common: {
      delete: "Xóa",
      close: "Đóng",
      cancel: "Hủy",
      save: "Lưu",
      loading: "Đang tải...",
      error: "Lỗi",
      success: "Thành công",
    },

    // Cart
    cart: {
      pageTitle: "Giỏ hàng",
      total: "Tổng cộng",
      empty: "Giỏ hàng trống",
      addedToCart: "Đã thêm vào giỏ hàng",
      failedToAdd: "Không thể thêm vào giỏ hàng",
      itemRemoved: "Đã xóa sản phẩm",
      failedToRemove: "Không thể xóa sản phẩm",
      cleared: "Đã xóa giỏ hàng",
      failedToClear: "Không thể xóa giỏ hàng",
    },

    // Not Found page
    notFound: {
      title: "Trang không tồn tại",
      description: "Trang bạn đang tìm kiếm không tồn tại hoặc đã được di chuyển.",
      message: "Trang bạn đang tìm kiếm không tồn tại hoặc đã được di chuyển.",
      backToHome: "Quay về trang chủ",
    },

    // Solar Energy page
    solarEnergy: {
      features: {
        cleanEnergy: {
          title: "Năng Lượng Sạch",
          description: "Sử dụng nguồn năng lượng tái tạo từ mặt trời, thân thiện với môi trường"
        },
        costSaving: {
          title: "Tiết Kiệm Chi Phí",
          description: "Giảm 80-90% hóa đơn điện hàng tháng sau khi lắp đặt"
        },
        longWarranty: {
          title: "Bảo Hành Dài Hạn",
          description: "Bảo hành 15-25 năm cho tấm pin và thiết bị chính"
        },
        ecoFriendly: {
          title: "Thân Thiện Môi Trường",
          description: "Giảm phát thải CO2, góp phần bảo vệ môi trường"
        }
      },
      categories: {
        solarPanels: {
          title: "Tấm Pin Mặt Trời",
          description: "Tấm pin chất lượng cao, hiệu suất tối ưu"
        },
        batteries: {
          title: "Pin Lưu Trữ",
          description: "Hệ thống lưu trữ năng lượng đáng tin cậy"
        },
        waterHeater: {
          title: "Máy Nước Nóng",
          description: "Giải pháp nước nóng tiết kiệm năng lượng"
        },
        solarElevator: {
          title: "Thang Máy Solar",
          description: "Thang máy sử dụng năng lượng mặt trời"
        }
      },
      addedToCart: "Đã thêm vào giỏ hàng"
    },

    // Toast messages
    toastMessages: {
      cameraError: "Lỗi Camera",
      visualSearchComplete: "Tìm kiếm hình ảnh hoàn thành",
      itemAddedToCart: "Đã thêm sản phẩm vào giỏ hàng",
      failedToAddItem: "Không thể thêm sản phẩm vào giỏ hàng",
      failedToUpdateCart: "Không thể cập nhật giỏ hàng",
      itemRemovedFromCart: "Đã xóa sản phẩm khỏi giỏ hàng",
      failedToRemoveItem: "Không thể xóa sản phẩm",
      cartCleared: "Đã xóa giỏ hàng",
      failedToClearCart: "Không thể xóa giỏ hàng",
      orderSuccess: "Đặt hàng thành công!",
    },
  }
};

export type Language = keyof typeof translations;
export type TranslationKey = keyof typeof translations.vi;

let currentLanguage: Language = 'vi';

export const setLanguage = (lang: Language) => {
  currentLanguage = lang;
};

export const getCurrentLanguage = (): Language => {
  return currentLanguage;
};

export const t = (key: string, replacements?: Record<string, string | number>): string => {
  const keys = key.split('.');
  let value: any = translations[currentLanguage];
  
  for (const k of keys) {
    if (value && typeof value === 'object' && k in value) {
      value = value[k];
    } else {
      console.warn(`Translation key not found: ${key}`);
      return key;
    }
  }
  
  if (typeof value !== 'string') {
    console.warn(`Translation value is not a string: ${key}`);
    return key;
  }
  
  if (replacements) {
    return value.replace(/\{(\w+)\}/g, (match, placeholder) => {
      return replacements[placeholder]?.toString() || match;
    });
  }
  
  return value;
};

// Helper function for pluralization (if needed in the future)
export const plural = (count: number, singular: string, plural: string): string => {
  return count === 1 ? singular : plural;
};

// Format currency
export const formatCurrency = (amount: number | string): string => {
  const num = typeof amount === 'string' ? parseInt(amount) : amount;
  return `${num.toLocaleString('vi-VN')}${t('currency')}`;
};

// Format time ago
export const formatTimeAgo = (date: Date | string): string => {
  const now = new Date();
  const past = new Date(date);
  const diffInSeconds = Math.floor((now.getTime() - past.getTime()) / 1000);
  
  if (diffInSeconds < 60) {
    return t('timeAgo.justNow');
  }
  
  const diffInMinutes = Math.floor(diffInSeconds / 60);
  if (diffInMinutes < 60) {
    return t('timeAgo.minutesAgo', { minutes: diffInMinutes });
  }
  
  const diffInHours = Math.floor(diffInMinutes / 60);
  if (diffInHours < 24) {
    return t('timeAgo.hoursAgo', { hours: diffInHours });
  }
  
  const diffInDays = Math.floor(diffInHours / 24);
  if (diffInDays < 30) {
    return t('timeAgo.daysAgo', { days: diffInDays });
  }
  
  const diffInMonths = Math.floor(diffInDays / 30);
  if (diffInMonths < 12) {
    return t('timeAgo.monthsAgo', { months: diffInMonths });
  }
  
  const diffInYears = Math.floor(diffInMonths / 12);
  return t('timeAgo.yearsAgo', { years: diffInYears });
};